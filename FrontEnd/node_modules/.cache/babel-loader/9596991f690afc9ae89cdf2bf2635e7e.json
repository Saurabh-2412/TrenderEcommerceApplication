{"ast":null,"code":"var _jsxFileName = \"E:\\\\NeogCampProjects\\\\LevelOneProjects\\\\E-Commerce\\\\E-Commerce-App\\\\src\\\\Components\\\\Product\\\\ProductListing.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport { useState, useReducer, useEffect } from \"react\";\nimport { useCartList } from \"../../Contexter/CartContext\";\nimport { useWishList } from \"../../Contexter/WishListContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ProductListing = ({}) => {\n  _s();\n\n  var _localStorage;\n\n  const [ItemsInProduct, SetItemsInProduct] = useState([]);\n  const {\n    cartList,\n    dispatchCart\n  } = useCartList();\n  const {\n    wishList,\n    dispatchWishList\n  } = useWishList();\n  const [accordian, setAccordian] = useState(\"none\");\n  const {\n    token\n  } = JSON.parse((_localStorage = localStorage) === null || _localStorage === void 0 ? void 0 : _localStorage.getItem(\"login\")) || {};\n  useEffect(() => {\n    (async function () {\n      const {\n        data\n      } = await axios.get(\"https://ecommercedata.saurabhsharma11.repl.co/v1/productData\");\n      SetItemsInProduct(data);\n    })();\n  }, []);\n\n  async function CartHandler(product) {\n    //console.log(\"this is for server \",product)\n    //console.log(isUserLoggedIn)\n    axios.interceptors.request.use(config => {\n      config.headers.authorization = token;\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n    const productId = product._id;\n\n    if (!cartList.some(item => item.id === product.id)) {\n      try {\n        const {\n          data\n        } = await axios.post(\"https://ecommercedata.saurabhsharma11.repl.co/v1/cartData\", {\n          product\n        }); //console.log(\"this is from cart post response\",data);\n\n        dispatchCart({\n          type: \"Added\",\n          payload: data.cart\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    } else {\n      dispatchCart({\n        type: \"AlreadyExist\"\n      });\n    }\n  }\n\n  async function WishListHandler(product) {\n    //console.log(\"wishlist handler\",product);\n    if (!wishList.some(item => item.id === product.id)) {\n      try {\n        const {\n          data\n        } = await axios.post(\"https://ecommercedata.saurabhsharma11.repl.co/v1/wishlistData\", {\n          product\n        }); //console.log(\"data posted in wish server\",data.wish);\n\n        if (wishList.some(item => item.id === product.id)) {\n          dispatchWishList({\n            type: \"Remove\",\n            payload: data.wish\n          });\n        } else {\n          dispatchWishList({\n            type: \"Added\",\n            payload: data.wish\n          });\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    } else {\n      dispatchWishList({\n        type: \"AlreadyExist\"\n      });\n    } //dispatchProduct({type:\"Added to wish\", payload: product});\n\n  } //filtering data\n\n\n  const [{\n    showInventoryAll,\n    showFastDeliveryOnly,\n    sortBy\n  }, dispatch] = useReducer(function reducer(state, action) {\n    switch (action.type) {\n      case \"TOGGLE_INVENTORY\":\n        return state = { ...state,\n          showInventoryAll: !state.showInventoryAll\n        };\n\n      case \"TOGGLE_DELIVERY\":\n        return state = { ...state,\n          showFastDeliveryOnly: !state.showFastDeliveryOnly\n        };\n\n      case \"SORT\":\n        return { ...state,\n          sortBy: action.payload\n        };\n\n      default:\n        return state;\n    }\n  }, {\n    showInventoryAll: true,\n    showFastDeliveryOnly: false,\n    sortBy: null\n  });\n\n  function getSortedData(productList, sortBy) {\n    if (sortBy && sortBy === \"PRICE_HIGH_TO_LOW\") {\n      return productList.sort((a, b) => b[\"price\"] - a[\"price\"]);\n    }\n\n    if (sortBy && sortBy === \"PRICE_LOW_TO_HIGH\") {\n      return productList.sort((a, b) => a[\"price\"] - b[\"price\"]);\n    }\n\n    return productList;\n  }\n\n  function getFilteredData(productList, {\n    showFastDeliveryOnly,\n    showInventoryAll\n  }) {\n    return productList.filter(({\n      fastDelivery\n    }) => showFastDeliveryOnly ? fastDelivery : true).filter(({\n      inStock\n    }) => showInventoryAll ? true : inStock);\n  }\n\n  const sortedData = getSortedData(ItemsInProduct, sortBy); //ItemsInProduct\n\n  const filteredData = getFilteredData(sortedData, {\n    showFastDeliveryOnly,\n    showInventoryAll\n  });\n\n  function accordianViewer() {\n    if (accordian === \"block\") {\n      setAccordian(\"none\");\n    } else {\n      setAccordian(\"block\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"accordion\",\n        onClick: accordianViewer,\n        children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n          name: \"filter\",\n          style: {\n            fontSize: \"2rem\",\n            marginRight: \"8px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        className: \"panel\",\n        style: {\n          display: accordian\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n          children: \"Sort By\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"sort\",\n            onChange: () => dispatch({\n              type: \"SORT\",\n              payload: \"PRICE_HIGH_TO_LOW\"\n            }),\n            checked: sortBy && sortBy === \"PRICE_HIGH_TO_LOW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), \" \", \"Price - High to Low\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"sort\",\n            onChange: () => dispatch({\n              type: \"SORT\",\n              payload: \"PRICE_LOW_TO_HIGH\"\n            }),\n            checked: sortBy && sortBy === \"PRICE_LOW_TO_HIGH\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), \" \", \"Price - Low to High\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        style: {\n          marginTop: \"1rem\",\n          display: accordian\n        },\n        className: \"panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n          children: \" Filters \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: showInventoryAll,\n            onChange: () => dispatch({\n              type: \"TOGGLE_INVENTORY\"\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), \"Include Out of Stock\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: showFastDeliveryOnly,\n            onChange: () => dispatch({\n              type: \"TOGGLE_DELIVERY\"\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), \"Fast Delivery Only\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"ProductList\",\n        children: filteredData.map(function (product) {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [product.inStock ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"active icon-bttn\",\n                onClick: () => CartHandler(product),\n                children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                  name: \"cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"active icon-bttn\",\n                style: {\n                  margin: \"1rem 14rem\"\n                },\n                onClick: () => WishListHandler(product),\n                children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                  name: \"heart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-bttn\",\n                onClick: () => CartHandler(product),\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-bttn\",\n                onClick: () => WishListHandler(product),\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.image,\n              alt: product.image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 23\n            }, this), \"Name : \", product.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 44\n            }, this), \"Price : \", product.price, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 23\n            }, this), \"Avalibility :\", product.inStock && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" In Stock \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 56\n            }, this), !product.inStock && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" Out of Stock \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 44\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 23\n            }, this), product.fastDelivery ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \" Fast Delivery \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 25\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \" 4 days minimum \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 25\n            }, this)]\n          }, product.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductListing, \"f9r9BWUE2S9aFTr4xZ5KWHPe2DQ=\", false, function () {\n  return [useCartList, useWishList];\n});\n\n_c = ProductListing;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductListing\");","map":{"version":3,"sources":["E:/NeogCampProjects/LevelOneProjects/E-Commerce/E-Commerce-App/src/Components/Product/ProductListing.js"],"names":["React","axios","useState","useReducer","useEffect","useCartList","useWishList","ProductListing","ItemsInProduct","SetItemsInProduct","cartList","dispatchCart","wishList","dispatchWishList","accordian","setAccordian","token","JSON","parse","localStorage","getItem","data","get","CartHandler","product","interceptors","request","use","config","headers","authorization","error","Promise","reject","productId","_id","some","item","id","post","type","payload","cart","err","console","log","WishListHandler","wish","showInventoryAll","showFastDeliveryOnly","sortBy","dispatch","reducer","state","action","getSortedData","productList","sort","a","b","getFilteredData","filter","fastDelivery","inStock","sortedData","filteredData","accordianViewer","fontSize","marginRight","display","marginTop","map","margin","image","name","price"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState, useReducer, useEffect } from \"react\";\r\nimport { useCartList } from \"../../Contexter/CartContext\";\r\nimport { useWishList } from \"../../Contexter/WishListContext\";\r\n\r\nexport const ProductListing = ({}) => {\r\n  const [ ItemsInProduct, SetItemsInProduct ] = useState([]);\r\n\r\n  const { cartList, dispatchCart } = useCartList();\r\n  const { wishList, dispatchWishList } = useWishList();\r\n  const [accordian,setAccordian] = useState(\"none\");\r\n  const  { token } = JSON.parse(localStorage?.getItem(\"login\")) || {}\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      const { data } = await axios.get(\r\n        \"https://ecommercedata.saurabhsharma11.repl.co/v1/productData\"\r\n      );\r\n      SetItemsInProduct(data);\r\n    })();\r\n  },[]);\r\n\r\n  async function CartHandler(product) {\r\n    //console.log(\"this is for server \",product)\r\n    //console.log(isUserLoggedIn)\r\n    axios.interceptors.request.use(\r\n      config => {\r\n        config.headers.authorization = token;\r\n        return config;\r\n      },\r\n      error => {\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n    const productId = product._id;\r\n    if(!cartList.some((item) => item.id === product.id)){\r\n      try {\r\n        const {data} = await axios.post(\r\n          \"https://ecommercedata.saurabhsharma11.repl.co/v1/cartData\",\r\n          { product }\r\n        );\r\n        //console.log(\"this is from cart post response\",data);\r\n        dispatchCart({ type: \"Added\", payload: data.cart});\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    } else {\r\n      dispatchCart({ type: \"AlreadyExist\" });\r\n    }\r\n  }\r\n\r\n  async function WishListHandler(product) {\r\n    //console.log(\"wishlist handler\",product);\r\n    if(!wishList.some((item) => item.id === product.id)){\r\n      try {\r\n        const {data} = await axios.post(\r\n          \"https://ecommercedata.saurabhsharma11.repl.co/v1/wishlistData\",\r\n          { product }\r\n        );\r\n        //console.log(\"data posted in wish server\",data.wish);\r\n        if(wishList.some((item) => (item.id === product.id))){\r\n          dispatchWishList({ type: \"Remove\", payload: data.wish});\r\n        } else {\r\n          dispatchWishList({ type: \"Added\", payload: data.wish});\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    } else {\r\n      dispatchWishList({ type: \"AlreadyExist\" });\r\n    }\r\n    //dispatchProduct({type:\"Added to wish\", payload: product});\r\n  }\r\n\r\n  //filtering data\r\n  const [\r\n    { showInventoryAll, showFastDeliveryOnly, sortBy },\r\n    dispatch\r\n  ] = useReducer(\r\n    function reducer(state, action) {\r\n      switch (action.type) {\r\n        case \"TOGGLE_INVENTORY\":\r\n          return (state = {\r\n            ...state,\r\n            showInventoryAll: !state.showInventoryAll\r\n          });\r\n\r\n        case \"TOGGLE_DELIVERY\":\r\n          return (state = {\r\n            ...state,\r\n            showFastDeliveryOnly: !state.showFastDeliveryOnly\r\n          });\r\n        case \"SORT\":\r\n          return {\r\n            ...state,\r\n            sortBy: action.payload\r\n          };\r\n        default:\r\n          return state;\r\n      }\r\n    },\r\n    {\r\n      showInventoryAll: true,\r\n      showFastDeliveryOnly: false,\r\n      sortBy: null\r\n    }\r\n  );\r\n\r\n  function getSortedData(productList, sortBy) {\r\n    if (sortBy && sortBy === \"PRICE_HIGH_TO_LOW\") {\r\n      return productList.sort((a, b) => b[\"price\"] - a[\"price\"]);\r\n    }\r\n\r\n    if (sortBy && sortBy === \"PRICE_LOW_TO_HIGH\") {\r\n      return productList.sort((a, b) => a[\"price\"] - b[\"price\"]);\r\n    }\r\n    return productList;\r\n  }\r\n\r\n  function getFilteredData(\r\n    productList,\r\n    { showFastDeliveryOnly, showInventoryAll }\r\n  ) {\r\n    return productList\r\n      .filter(({ fastDelivery }) =>\r\n        showFastDeliveryOnly ? fastDelivery : true\r\n      )\r\n      .filter(({ inStock }) => (showInventoryAll ? true : inStock));\r\n  }\r\n\r\n  const sortedData = getSortedData(ItemsInProduct, sortBy);//ItemsInProduct\r\n  const filteredData = getFilteredData(sortedData, {\r\n    showFastDeliveryOnly,\r\n    showInventoryAll\r\n  });\r\n\r\n  function accordianViewer(){\r\n    if(accordian === \"block\"){\r\n      setAccordian(\"none\")\r\n    } else {\r\n      setAccordian(\"block\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n        <div>\r\n          <button className=\"accordion\" onClick={accordianViewer}>\r\n            <ion-icon name=\"filter\" style={{fontSize:\"2rem\",marginRight:\"8px\"}}></ion-icon>\r\n          </button>\r\n          <fieldset className=\"panel\" style={{display:accordian}}>\r\n            <legend>Sort By</legend>\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"sort\"\r\n                onChange={() =>\r\n                  dispatch({ type: \"SORT\", payload: \"PRICE_HIGH_TO_LOW\" })\r\n                }\r\n                checked={sortBy && sortBy === \"PRICE_HIGH_TO_LOW\"}\r\n              ></input>{\" \"}\r\n              Price - High to Low\r\n            </label>\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"sort\"\r\n                onChange={() =>\r\n                  dispatch({ type: \"SORT\", payload: \"PRICE_LOW_TO_HIGH\" })\r\n                }\r\n                checked={sortBy && sortBy === \"PRICE_LOW_TO_HIGH\"}\r\n              ></input>{\" \"}\r\n              Price - Low to High\r\n            </label>\r\n          </fieldset>\r\n          <fieldset style={{ marginTop: \"1rem\",display:accordian}} className=\"panel\">\r\n            <legend> Filters </legend>\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showInventoryAll}\r\n                onChange={() => dispatch({ type: \"TOGGLE_INVENTORY\" })}\r\n              />\r\n              Include Out of Stock\r\n            </label>\r\n  \r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showFastDeliveryOnly}\r\n                onChange={() => dispatch({ type: \"TOGGLE_DELIVERY\" })}\r\n              />\r\n              Fast Delivery Only\r\n            </label>\r\n          </fieldset>\r\n          \r\n          <ul className=\"ProductList\">\r\n            {filteredData.map(function (product) {\r\n              return (\r\n                <li key={product.id}>\r\n                  {product.inStock ? (\r\n                    <>\r\n                      <button className=\"active icon-bttn\" onClick={() => CartHandler(product)}>\r\n                        <ion-icon name=\"cart\"></ion-icon>\r\n                      </button>\r\n                      <button className=\"active icon-bttn\" style={{margin:\"1rem 14rem\"}} onClick={() => WishListHandler(product)}>\r\n                        <ion-icon name=\"heart\"></ion-icon>\r\n                      </button>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <button className=\"icon-bttn\" onClick={() => CartHandler(product)} disabled></button>\r\n                      <button className=\"icon-bttn\" onClick={() => WishListHandler(product)} disabled></button>\r\n                    </>\r\n                  )}\r\n                      <img src={product.image} alt={product.image} />\r\n                      <br />\r\n                      Name : {product.name}<br />\r\n                      Price : {product.price}\r\n                      <br />\r\n                      Avalibility :{product.inStock && <span> In Stock </span>}\r\n                      {!product.inStock && <span> Out of Stock </span>}\r\n                      <br />\r\n                      {product.fastDelivery ? (\r\n                        <div> Fast Delivery </div>\r\n                      ) : (\r\n                        <div> 4 days minimum </div>\r\n                      )}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}